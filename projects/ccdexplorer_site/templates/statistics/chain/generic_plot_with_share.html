

<div class="position-relative">
  <button
    type="button"
    class="btn btn-sm position-absolute top-0 start-0 me-2 d-none"
    style="z-index: 5;"
    data-share-url="{{ env.SITE_URL }}/plots/{{ net }}/{{plot_name}}"
    onclick="sharePlot(this)"
    id="share-btn-{{plot_name}}"
  >
    <i class="bi bi-share-fill"></i>
  </button>

  <div
    id="plot-{{plot_name}}"
    hx-trigger="load, switched-theme from:body"
    hx-post="{{ env.SITE_URL }}/{{ net }}/{{ajax_url}}"
    hx-vals='js:{theme: document.querySelector("html").getAttribute("data-bs-theme")}'
  ></div>
</div>

<script>
  document.body.addEventListener("htmx:afterSwap", function (e) {
    if (e.target && e.target.id === "plot-{{plot_name}}") {
      document.getElementById("share-btn-{{plot_name}}")?.classList.remove("d-none");
    }
  });
</script>